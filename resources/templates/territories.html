{% extends "base.html" %}
{% block content %}
<h2>Territories</h2>

{% for territory in territories %}
<div class="territory">
    <div class="title">Aluekartta</div>

    <div class="city">
        <div class="title-label">Paikkakunta</div>
        <div class="title-value">Vuosaari</div>
    </div>
    <div class="number">
        <div class="title-label">Alue nro</div>
        <div class="title-value">{{ territory.name }}</div>
    </div>

    <div id="map-{{ territory.id }}" class="map"></div>

    <div class="addresses">{{ territory.address }}</div>

    <div class="footer">
        Pidä tätä korttia kotelossa. Älä tahri äläkä taita sitä äläkä tee siihen mitään merkintöjä.
        <br>Joka kerta kun alue on käyty läpi, ilmoita siitä veljelle, joka hoitaa aluekarttoja.
    </div>
</div>
{% endfor %}

<div class="territories-import">
    <h2>Import</h2>

    <form action="/territories" method="post" enctype="multipart/form-data">
        {% csrf-field %}
        <p>Territories GeoJSON: <input type="file" name="territories"></p>
        <button type="submit" class="btn btn-primary">Import</button>
    </form>
</div>
{% endblock %}

{% block page-scripts %}
<link rel="stylesheet" href="http://openlayers.org/en/v3.10.1/css/ol.css" type="text/css">
<script src="http://openlayers.org/en/v3.10.1/build/ol.js" type="text/javascript"></script>
<script type="text/javascript">
    // {% for territory in territories %}
    territoryBro.initTerritoryMap('map-{{ territory.id }}', '{{ territory.area }}');
    // {% endfor %}
</script>
{% endblock %}
